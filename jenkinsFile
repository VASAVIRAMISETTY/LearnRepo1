pipeline {
    agent any 
    tools {
        maven 'maven'
        jdk 'java'
    }
    stages {
        // stage('SonarQube - Static Code Analysis'){
        //     steps  {
        //        sh 'mvn clean verify sonar:sonar -DskipTests'
        //     }
        // } 
        stage('Clean'){
            steps  {
                sh 'mvn clean'
            }
        }
        stage('Validate') { 
            steps {
                sh 'mvn validate'   
            }
        }
        stage('Compile') { 
            steps {
                sh 'mvn compile'
            }
        }
        stage('Test') { 
            steps {
                sh 'mvn test -DskipTests' 
            }
        }
        stage('Install') { 
            steps {
                sh 'mvn install -DskipTests'
            }
        }
        stage('Verify') { 
            steps {
                sh 'mvn verify -DskipTests'
            }
        }
        stage('Package') { 
            steps {
                sh 'mvn package -DskipTests'
            }
        }
        // stage('Deploy an Artifact to Artifactory Manager i.e. Nexus/Jfrog') { 
        //     steps {
                // sh 'mvn deploy -DskipTests'
        //     }
        // }
        
        // stage('Delivery - Deploy a Artifact staragile-3.1.0.war file to Tomcat Server '){
        //     steps{
        //         sh 'curl -u admin:redhat@123 -T target/**.war "http://18.116.20.170:8080/manager/text/deploy?path=/staragile&update=true"' 
        //     }
        // }
        // stage('SmokeTest'){
        //     steps{
        //         sh 'curl --retry-delay 10 --retry 5 "http://18.116.20.170:8080/staragile"' 
        //     }
        // }
    }
}
